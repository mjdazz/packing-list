// Language strings
const translations = {
    en: {
        title: 'Smart Packing List',
        subtitle: 'âœ¨ Generate your perfect packing list based on your trip details âœ¨',
        tripDetails: 'âœˆï¸ Trip Details',
        nights: 'Number of Nights',
        weather: 'Weather',
        accommodation: 'Accommodation Type',
        beach: 'Beach',
        sauna: 'Sauna',
        hiking: 'Hiking',
        climbing: 'Climbing',
        abroad: 'Abroad',
        flight: 'Flight',
        photos: 'Photos',
        washingMachine: 'Washing Machine Available',
        generateButton: 'âœ¨ Generate Packing List âœ¨',
        yourPackingList: 'ðŸ“‹ Your Packing List',
        of: 'of',
        packed: 'packed',
        enterDetails: 'Enter your trip details and generate your packing list âœ¨',

        // Packing list items
        shirt: 'Shirt',
        shirts: 'Shirts',
        detergent: 'Detergent',
        underpant: 'Underpant',
        underpants: 'Underpants',
        sockPair: 'Sock pair',
        sockPairs: 'Sock pairs',
        sunscreen: 'Sunscreen',
        sunglasses: 'Sunglasses',
        vest: 'Vest',
        vests: 'Vests',
        pairOfShorts: 'Pair of shorts',
        pairsOfShorts: 'Pairs of shorts',
        jacket: 'Jacket',
        pairOfPants: 'Pair of pants',
        pairsOfPants: 'Pairs of pants',
        pairOfGloves: 'Pair of gloves',
        hat: 'Hat',
        additionalShoes: 'Additional pair of shoes',
        swimsuit: 'Swimsuit',
        flipFlops: 'Pair of flip flops',
        beachTowel: 'Beach towel',
        sunHat: 'Sun hat',
        saunaTowel: 'Sauna towel',
        bathrobe: 'Bathrobe',
        slippers: 'Slippers',
        saunaHat: 'Sauna hat',
        hikingBoots: 'Pair of hiking boots',
        hikingPants: 'Pair of hiking pants',
        hikingSocks: 'Pair of hiking socks',
        hikingStick: 'Hiking stick',
        backpack: 'Backpack',
        waterBag: 'Water bag',
        headlamp: 'Headlamp',
        climbingShoes: 'Pair of climbing shoes',
        viaFerrata: 'Via ferrata set',
        carabiner: 'Carabiner',
        climbingHarness: 'Climbing harness',
        helmet: 'Helmet',
        phone: 'Phone',
        phoneCharger: 'Phone charger',
        notebook: 'Notebook',
        notebookCharger: 'Notebook charger',
        headphones: 'Headphones',
        powerBank: 'Power bank',
        steamDeck: 'Steam Deck',
        usbAdapter: 'USB-C Adapter',
        camera: 'Camera',
        cameraCharger: 'Camera charger',
        passport: 'Passport',
        travelAdapter: 'Travel adapter',
        neckPillow: 'Neck pillow',
        earplugs: 'Pair of earplugs',
        padlock: 'Padlock',
        towels: 'Towels',
        sleepingBag: 'Sleeping bag',
        towel: 'Towel',
        aeropress: 'Aeropress',
        knife: 'Knife',
        spicery: 'Spicery',
        toothbrush: 'Toothbrush',
        toothpaste: 'Toothpaste',
        showerGel: 'Shower gel',
        deodorant: 'Deodorant',
        combBrush: 'Comb/Brush',
        nightGuard: 'Night guard',
        shaver: 'Shaver',
        nailClipper: 'Nail clipper',
        cash: 'Cash',
        waterBottle: 'Water bottle',
        driversLicense: 'Driver\'s license',
        painkillers: 'Painkillers',
        bandAid: 'Band aid',
        disinfectant: 'Disinfectant',
        chewingGum: 'Chewing gum',
        books: 'Books/E-Reader',
        washingBag: 'Washing bag',
        condoms: 'Condoms'
    },
    de: {
        title: 'Intelligente Packliste',
        subtitle: 'âœ¨ Erstelle deine perfekte Packliste basierend auf deinen Reisedetails âœ¨',
        tripDetails: 'âœˆï¸ Reisedetails',
        nights: 'Anzahl der NÃ¤chte',
        weather: 'Wetter',
        accommodation: 'Unterkunftsart',
        beach: 'Strand',
        sauna: 'Sauna',
        hiking: 'Wandern',
        climbing: 'Klettern',
        abroad: 'Auslandsreise',
        flight: 'Flugreise',
        photos: 'Fotos',
        washingMachine: 'Waschmaschine verfÃ¼gbar',
        generateButton: 'âœ¨ Packliste generieren âœ¨',
        yourPackingList: 'ðŸ“‹ Deine Packliste',
        of: 'von',
        packed: 'gepackt',
        enterDetails: 'Gib deine Reisedaten ein und generiere deine Packliste âœ¨',

        // Packing list items
        shirt: 'T-Shirt',
        shirts: 'T-Shirts',
        detergent: 'Waschmittel',
        underpant: 'Unterhose',
        underpants: 'Unterhosen',
        sockPair: 'Sockenpaar',
        sockPairs: 'Sockenpaare',
        sunscreen: 'Sonnencreme',
        sunglasses: 'Sonnenbrille',
        vest: 'Tanktop',
        vests: 'Tanktops',
        pairOfShorts: 'Kurze Hose',
        pairsOfShorts: 'Kurze Hosen',
        jacket: 'Jacke',
        pairOfPants: 'Lange Hose',
        pairsOfPants: 'Lange Hosen',
        pairOfGloves: 'Handschuhe',
        hat: 'MÃ¼tze',
        additionalShoes: 'ZusÃ¤tzliche Schuhe',
        swimsuit: 'Badekleidung',
        flipFlops: 'Badeschlappen',
        beachTowel: 'Strandtuch',
        sunHat: 'Sonnenhut',
        saunaTowel: 'Saunatuch',
        bathrobe: 'Bademantel',
        slippers: 'Hausschuhe',
        saunaHat: 'Saunahut',
        hikingBoots: 'Wanderschuhe',
        hikingPants: 'Wanderhose',
        hikingSocks: 'Wandersocken',
        hikingStick: 'Wanderstock',
        backpack: 'Rucksack',
        waterBag: 'Trinkblase',
        headlamp: 'Stirnlampe',
        climbingShoes: 'Kletterschuhe',
        viaFerrata: 'Klettersteigset',
        carabiner: 'Karabiner',
        climbingHarness: 'Klettergurt',
        helmet: 'Helm',
        phone: 'Handy',
        phoneCharger: 'HandyladegerÃ¤t',
        notebook: 'Notebook',
        notebookCharger: 'Netzteil',
        headphones: 'KopfhÃ¶rer',
        powerBank: 'Powerbank',
        steamDeck: 'Steam Deck',
        usbAdapter: 'USB-C-Adapter',
        camera: 'Kamera',
        cameraCharger: 'Kamera-LadegerÃ¤t',
        passport: 'Reisepass',
        travelAdapter: 'Reisestecker',
        neckPillow: 'Nackenkissen',
        earplugs: 'Ohropax',
        padlock: 'VorhÃ¤ngeschloss',
        towels: 'HandtÃ¼cher',
        sleepingBag: 'Schlafsack',
        towel: 'Handtuch',
        aeropress: 'Aeropress',
        knife: 'Messer',
        spicery: 'GewÃ¼rze',
        toothbrush: 'ZahnbÃ¼rste',
        toothpaste: 'Zahnpasta',
        showerGel: 'Duschgel',
        deodorant: 'Deo',
        combBrush: 'Kamm/BÃ¼rste',
        nightGuard: 'Zahnschiene',
        shaver: 'Rasierer',
        nailClipper: 'Nagelschere',
        cash: 'Bargeld',
        waterBottle: 'Wasserflasche',
        driversLicense: 'FÃ¼hrerschein',
        painkillers: 'Schmerzmittel',
        bandAid: 'Pflaster',
        disinfectant: 'Desinfektionsmittel',
        chewingGum: 'Kaugummi',
        books: 'BÃ¼cher/E-Reader',
        washingBag: 'WÃ¤schebeutel',
        condoms: 'Kondome'
    }
};

// Function to set the language
function setLanguage(lang) {
    // Update the HTML lang attribute
    document.documentElement.lang = lang;
    document.body.setAttribute('data-lang', lang);

    // Save the language preference
    localStorage.setItem('preferredLanguage', lang);

    // Update all translatable elements
    document.querySelectorAll('.i18n').forEach(element => {
        const key = element.getAttribute('data-key');
        if (translations[lang] && translations[lang][key]) {
            element.textContent = translations[lang][key];
        }
    });

    // Update button text
    document.querySelector('.en').classList.toggle('hidden', lang === 'de');
    document.querySelector('.de').classList.toggle('hidden', lang === 'en');

    // Update form fields
    const formFields = {
        'nightsLabel': 'nights',
        'weatherLabel': 'weather',
        'accommodationLabel': 'accommodation',
        'beach': 'beach',
        'sauna': 'sauna',
        'hiking': 'hiking',
        'climbing': 'climbing',
        'abroad': 'abroad',
        'flight': 'flight',
        'fotos': 'photos',
        'washing_machine': 'washingMachine',
        'generateBtn': 'generateButton',
        'packedStatusText': 'of',
        'packedText': 'packed'
    };

    Object.entries(formFields).forEach(([id, key]) => {
        const element = document.getElementById(id);
        if (element) {
            if (id === 'packedStatusText' || id === 'packedText') {
                element.textContent = translations[lang][key];
            } else if (element.tagName === 'LABEL') {
                element.textContent = translations[lang][key];
            } else if (element.tagName === 'BUTTON') {
                element.textContent = translations[lang][key];
            } else if (element.tagName === 'SPAN') {
                element.textContent = translations[lang][key];
            }
        }
    });

    // Update the packing list title if it exists
    const packingListTitle = document.querySelector('.packing-list h2');
    if (packingListTitle) {
        packingListTitle.textContent = translations[lang].yourPackingList;
    }

    // Update the placeholder text if it exists
    const placeholder = document.querySelector('#packingList .text-indigo-400');
    if (placeholder) {
        placeholder.textContent = translations[lang].enterDetails;
    }
}

// Initialize the language
function initLanguage() {
    // Check for saved language preference or use browser language
    const savedLang = localStorage.getItem('preferredLanguage');
    const browserLang = navigator.language.split('-')[0];
    const defaultLang = ['en', 'de'].includes(browserLang) ? browserLang : 'en';
    const lang = savedLang || defaultLang;

    // Set the language
    setLanguage(lang);

    // Add event listener for language toggle
    document.getElementById('languageToggle').addEventListener('click', () => {
        const newLang = document.documentElement.lang === 'en' ? 'de' : 'en';
        setLanguage(newLang);
    });
}

// Call initLanguage when the DOM is loaded
document.addEventListener('DOMContentLoaded', initLanguage);
