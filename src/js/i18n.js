// Language strings
export const translations = {
    en: {
        title: 'Smart Packing List',
        subtitle: 'âœ¨ Generate your perfect packing list based on your trip details âœ¨',
        tripDetails: 'âœˆï¸ Trip Details',
        nights: 'Number of Nights',
        weather: 'Weather',
        accommodation: 'Accommodation Type',
        beach: 'Beach',
        sauna: 'Sauna',
        hiking: 'Hiking',
        climbing: 'Climbing',
        abroad: 'Abroad',
        flight: 'Flight',
        photos: 'Photos',
        washingMachine: 'Washing Machine Available',
        generateButton: 'âœ¨ Generate Packing List âœ¨',
        yourPackingList: 'ðŸ“‹ Your Packing List',
        of: 'of',
        packed: 'packed',
        enterDetails: 'Enter your trip details and generate your packing list âœ¨',

        // Packing list items
        shirt: 'Shirt',
        shirts: 'Shirts',
        detergent: 'Detergent',
        underpant: 'Underpant',
        underpants: 'Underpants',
        sockPair: 'Sock pair',
        sockPairs: 'Sock pairs',
        sunscreen: 'Sunscreen',
        sunglasses: 'Sunglasses',
        vest: 'Vest',
        vests: 'Vests',
        pairOfShorts: 'Pair of shorts',
        pairsOfShorts: 'Pairs of shorts',
        jacket: 'Jacket',
        pairOfPants: 'Pair of pants',
        pairsOfPants: 'Pairs of pants',
        pairOfGloves: 'Pair of gloves',
        hat: 'Hat',
        additionalShoes: 'Additional pair of shoes',
        swimsuit: 'Swimsuit',
        flipFlops: 'Pair of flip flops',
        beachTowel: 'Beach towel',
        sunHat: 'Sun hat',
        saunaTowel: 'Sauna towel',
        bathrobe: 'Bathrobe',
        slippers: 'Slippers',
        saunaHat: 'Sauna hat',
        hikingBoots: 'Pair of hiking boots',
        hikingPants: 'Pair of hiking pants',
        hikingSocks: 'Pair of hiking socks',
        hikingStick: 'Hiking stick',
        backpack: 'Backpack',
        waterBag: 'Water bag',
        headlamp: 'Headlamp',
        climbingShoes: 'Pair of climbing shoes',
        viaFerrata: 'Via ferrata set',
        carabiner: 'Carabiner',
        climbingHarness: 'Climbing harness',
        helmet: 'Helmet',
        phone: 'Phone',
        phoneCharger: 'Phone charger',
        notebook: 'Notebook',
        notebookCharger: 'Notebook charger',
        headphones: 'Headphones',
        powerBank: 'Power bank',
        steamDeck: 'Steam Deck',
        usbAdapter: 'USB-C Adapter',
        camera: 'Camera',
        cameraCharger: 'Camera charger',
        passport: 'Passport',
        travelAdapter: 'Travel adapter',
        neckPillow: 'Neck pillow',
        earplugs: 'Pair of earplugs',
        padlock: 'Padlock',
        towels: 'Towels',
        sleepingBag: 'Sleeping bag',
        towel: 'Towel',
        aeropress: 'Aeropress',
        knife: 'Knife',
        spicery: 'Spicery',
        toothbrush: 'Toothbrush',
        toothpaste: 'Toothpaste',
        showerGel: 'Shower gel',
        deodorant: 'Deodorant',
        combBrush: 'Comb/Brush',
        nightGuard: 'Night guard',
        shaver: 'Shaver',
        nailClipper: 'Nail clipper',
        cash: 'Cash',
        waterBottle: 'Water bottle',
        driversLicense: 'Driver\'s license',
        painkillers: 'Painkillers',
        bandAid: 'Band aid',
        disinfectant: 'Disinfectant',
        chewingGum: 'Chewing gum',
        books: 'Books/E-Reader',
        washingBag: 'Washing bag',
        condoms: 'Condoms',
        hdmiCable: 'HDMI cable',

        // Weather options
        weatherWarm: 'Warm',
        weatherMedium: 'Medium',
        weatherCold: 'Cold',

        // Categories
        categoryClothing: 'Clothing',
        categoryPersonal: 'Personal Care',
        categoryBeach: 'Beach',
        categorySauna: 'Sauna',
        categoryHiking: 'Hiking',
        categoryClimbing: 'Climbing',
        categoryElectronics: 'Electronics',
        categoryTravel: 'Travel',
        categoryAccommodation: 'Accommodation',
        categoryMisc: 'Miscellaneous',

        // Accommodation types
        accommodationHotel: 'Hotel',
        accommodationHostel: 'Hostel',
        accommodationMountainCabin: 'Mountain Cabin',
        accommodationHolidayHome: 'Holiday Home',

        // Custom items
        customItems: 'âœï¸ Custom Items'
    },
    de: {
        title: 'Intelligente Packliste',
        subtitle: 'âœ¨ Erstelle deine perfekte Packliste basierend auf deinen Reisedetails âœ¨',
        tripDetails: 'âœˆï¸ Reisedetails',
        nights: 'Anzahl der NÃ¤chte',
        weather: 'Wetter',
        accommodation: 'Unterkunftsart',
        beach: 'Strand',
        sauna: 'Sauna',
        hiking: 'Wandern',
        climbing: 'Klettern',
        abroad: 'Auslandsreise',
        flight: 'Flugreise',
        photos: 'Fotos',
        washingMachine: 'Waschmaschine verfÃ¼gbar',
        generateButton: 'âœ¨ Packliste generieren âœ¨',
        yourPackingList: 'ðŸ“‹ Deine Packliste',
        of: 'von',
        packed: 'gepackt',
        enterDetails: 'Gib deine Reisedaten ein und generiere deine Packliste âœ¨',

        // Packing list items
        shirt: 'T-Shirt',
        shirts: 'T-Shirts',
        detergent: 'Waschmittel',
        underpant: 'Unterhose',
        underpants: 'Unterhosen',
        sockPair: 'Sockenpaar',
        sockPairs: 'Sockenpaare',
        sunscreen: 'Sonnencreme',
        sunglasses: 'Sonnenbrille',
        vest: 'Weste',
        vests: 'Westen',
        pairOfShorts: 'Kurze Hose',
        pairsOfShorts: 'Kurze Hosen',
        jacket: 'Jacke',
        pairOfPants: 'Lange Hose',
        pairsOfPants: 'Lange Hosen',
        pairOfGloves: 'Handschuhe',
        hat: 'MÃ¼tze',
        additionalShoes: 'ZusÃ¤tzliche Schuhe',
        swimsuit: 'Badekleidung',
        flipFlops: 'Badeschlappen',
        beachTowel: 'Strandtuch',
        sunHat: 'Sonnenhut',
        saunaTowel: 'Saunatuch',
        bathrobe: 'Bademantel',
        slippers: 'Badeschuhe',
        saunaHat: 'Saunahut',
        hikingBoots: 'Wanderschuhe',
        hikingPants: 'Wanderhose',
        hikingSocks: 'Wandersocken',
        hikingStick: 'Wanderstock',
        backpack: 'Rucksack',
        waterBag: 'Trinkblase',
        headlamp: 'Stirnlampe',
        climbingShoes: 'Kletterschuhe',
        viaFerrata: 'Klettersteigset',
        carabiner: 'Karabiner',
        climbingHarness: 'Klettergurt',
        helmet: 'Helm',
        phone: 'Handy',
        phoneCharger: 'HandyladegerÃ¤t',
        notebook: 'Notebook',
        notebookCharger: 'Netzteil',
        headphones: 'KopfhÃ¶rer',
        powerBank: 'Powerbank',
        steamDeck: 'Steam Deck',
        usbAdapter: 'USB-C-Adapter',
        camera: 'Kamera',
        cameraCharger: 'Kamera-LadegerÃ¤t',
        passport: 'Reisepass',
        travelAdapter: 'Reisestecker',
        neckPillow: 'Nackenkissen',
        earplugs: 'Ohropax',
        padlock: 'VorhÃ¤ngeschloss',
        towels: 'HandtÃ¼cher',
        sleepingBag: 'Schlafsack',
        towel: 'Handtuch',
        aeropress: 'Aeropress',
        knife: 'Messer',
        spicery: 'GewÃ¼rze',
        toothbrush: 'ZahnbÃ¼rste',
        toothpaste: 'Zahnpasta',
        showerGel: 'Duschgel',
        deodorant: 'Deo',
        combBrush: 'Kamm/BÃ¼rste',
        nightGuard: 'Zahnschiene',
        shaver: 'Rasierer',
        nailClipper: 'Nagelschere',
        cash: 'Bargeld',
        waterBottle: 'Wasserflasche',
        driversLicense: 'FÃ¼hrerschein',
        painkillers: 'Schmerzmittel',
        bandAid: 'Pflaster',
        disinfectant: 'Desinfektionsmittel',
        chewingGum: 'Kaugummi',
        books: 'BÃ¼cher/E-Reader',
        washingBag: 'WÃ¤schebeutel',
        condoms: 'Kondome',
        hdmiCable: 'HDMI-Kabel',

        // Weather options
        weatherWarm: 'Warm',
        weatherMedium: 'Mittel',
        weatherCold: 'Kalt',

        // Categories
        categoryClothing: 'Kleidung',
        categoryPersonal: 'KÃ¶rperpflege',
        categoryBeach: 'Strand',
        categorySauna: 'Sauna',
        categoryHiking: 'Wandern',
        categoryClimbing: 'Klettern',
        categoryElectronics: 'Elektronik',
        categoryTravel: 'Reise',
        categoryAccommodation: 'Unterkunft',
        categoryMisc: 'Verschiedenes',

        // Accommodation types
        accommodationHotel: 'Hotel',
        accommodationHostel: 'Hostel',
        accommodationMountainCabin: 'BerghÃ¼tte',
        accommodationHolidayHome: 'Ferienwohnung',

        // Custom items
        customItems: 'âœï¸ Eigene GegenstÃ¤nde'
    }
};

// Function to set the language
export function setLanguage(lang) {
    // Update the HTML lang attribute
    document.documentElement.lang = lang;
    document.body.setAttribute('data-lang', lang);

    // Save the selected language to localStorage
    localStorage.setItem('preferredLanguage', lang);

    // Store translations in the document's dataset for easy access
    document.documentElement.setAttribute('data-translations', JSON.stringify(translations));

    // Update the language toggle button
    const languageToggle = document.getElementById('languageToggle');
    if (languageToggle) {
        const enSpan = languageToggle.querySelector('.en');
        const deSpan = languageToggle.querySelector('.de');

        if (lang === 'de') {
            enSpan.classList.add('hidden');
            deSpan.classList.remove('hidden');
        } else {
            enSpan.classList.remove('hidden');
            deSpan.classList.add('hidden');
        }
    }

    // Update all translatable elements
    const translatableElements = document.querySelectorAll('.i18n');
    translatableElements.forEach(element => {
        const key = element.getAttribute('data-key');
        if (key && translations[lang] && translations[lang][key]) {
            // Check if the element is an input placeholder
            if (element.tagName === 'INPUT' && element.type !== 'submit' && element.type !== 'button') {
                element.placeholder = translations[lang][key];
            }
            // Check if the element is an input value (for buttons and submits)
            else if ((element.tagName === 'INPUT' && (element.type === 'submit' || element.type === 'button')) ||
                     element.tagName === 'BUTTON') {
                element.value = translations[lang][key];
            }
            // For all other elements, update the text content
            else {
                element.textContent = translations[lang][key];
            }
        }
    });

    // Update select options with data-i18n attribute
    const selectElements = document.querySelectorAll('select');
    selectElements.forEach(select => {
        const options = select.querySelectorAll('option[data-i18n]');
        options.forEach(option => {
            const key = option.getAttribute('data-i18n');
            if (key && translations[lang] && translations[lang][key]) {
                // Extract emoji prefix if present
                const text = option.textContent;
                const emojiMatch = text.match(/^([\u{1F300}-\u{1F9FF}][\u{FE00}-\u{FE0F}]?|[\u{2600}-\u{26FF}][\u{FE00}-\u{FE0F}]?)\s*/u);
                const emoji = emojiMatch ? emojiMatch[0] : '';

                // Update option text with emoji + translation
                option.textContent = emoji + translations[lang][key];
            }
        });
    });

    // Trigger a custom event for dynamic content that needs to update
    document.dispatchEvent(new CustomEvent('languageChanged', { detail: { language: lang } }));

    // Regenerate the packing list if it exists
    if (typeof generatePackingList === 'function') {
        generatePackingList();
    }
}

// Initialize the language
export function initLanguage() {
    // Check for saved language preference or use browser language
    const savedLang = localStorage.getItem('preferredLanguage');
    const browserLang = navigator.language.split('-')[0];
    const defaultLang = ['en', 'de'].includes(browserLang) ? browserLang : 'en';
    const lang = savedLang || defaultLang;

    // Set the language
    setLanguage(lang);

    // Add event listener for language toggle
    document.getElementById('languageToggle').addEventListener('click', () => {
        const newLang = document.documentElement.lang === 'en' ? 'de' : 'en';
        setLanguage(newLang);
    });
}

// initLanguage will be called from main.js
